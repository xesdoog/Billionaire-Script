on:
  workflow_dispatch:

jobs:
  delete_all:
    runs-on: ubuntu-latest
    name: Delete Releases & Tags
    steps:
    - uses: actions/checkout@master
    - name: Todo Deleto Cuz
      id: del_all
      env:
        GH_TOKEN: ${{ github.token }}
      run: |
        gh release list \
        sed 's/|/ /' | awk '{print $1, $8}' \
        while read -r line; do
          gh release delete -y "$line";
        done
        for tag in `gh api repos/:owner/:repo/tags | jq -r '.[].name'`; do
          gh api repos/:owner/:repo/git/refs/tags/${tag} -X DELETE
        done
      shell: bash
